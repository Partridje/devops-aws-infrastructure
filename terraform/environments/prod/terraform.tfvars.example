#####################################
# Production Environment - Example Variables
#####################################
# Copy this file to terraform.tfvars and update with your values
# cp terraform.tfvars.example terraform.tfvars
#####################################

# Project configuration
project_name = "demo-app"
environment  = "prod"
aws_region   = "eu-north-1"

# Network configuration
# Use different CIDR than dev to allow VPC peering if needed
vpc_cidr = "10.1.0.0/16"

# Application configuration
application_port = 5001
app_version      = "1.0.0"  # Use specific version tags in production

# ECR repository (update after creating ECR repository)
ecr_repository_url = ""  # e.g., "123456789012.dkr.ecr.eu-north-1.amazonaws.com/demo-app"

#####################################
# HTTPS/SSL Configuration
#####################################
# See docs/HTTPS_SETUP.md for detailed setup instructions

# ACM certificate ARN (leave empty to disable HTTPS)
# Create certificate: AWS Console ‚Üí Certificate Manager ‚Üí Request certificate
certificate_arn = ""  # e.g., "arn:aws:acm:eu-north-1:123456789012:certificate/xxx"

# Enable HTTP to HTTPS redirect (recommended for production)
# Only works if certificate_arn is provided
enable_https_redirect = true

# SSL/TLS security policy
# Options:
#   - ELBSecurityPolicy-TLS13-1-2-2021-06 (TLS 1.3 only, most secure)
#   - ELBSecurityPolicy-TLS-1-2-2017-01 (TLS 1.2+, default, good balance)
#   - ELBSecurityPolicy-2016-08 (TLS 1.0+, legacy support)
ssl_policy = "ELBSecurityPolicy-TLS-1-2-2017-01"

# Database configuration
database_name = "appdb"
rds_port      = 5432

# Monitoring configuration
# ‚ö†Ô∏è CRITICAL: Production MUST have email alerts configured!
# After running 'terraform apply', AWS will send confirmation emails to all addresses.
# You MUST click "Confirm subscription" link in each email to receive alerts.
#
# See docs/SNS_SETUP.md for detailed setup instructions
#
# What you'll be notified about:
#   - üî¥ Critical: Unhealthy instances, database failures, storage issues
#   - üü† Warning: High CPU, slow response times, application errors
#   - üìä Events: EC2/RDS state changes, configuration updates
#
# Best practices:
#   ‚úÖ Use distribution lists (devops@example.com) for team notifications
#   ‚úÖ Include on-call rotation email
#   ‚úÖ Add backup notification method (Slack, PagerDuty)
#   ‚úÖ Confirm all subscriptions immediately after deployment
#   ‚úÖ Test alerts after initial setup
#
# Example:
#   alert_email_addresses = [
#     "devops@example.com",      # Main DevOps team
#     "oncall@example.com",       # On-call rotation
#     "sre-team@example.com"      # SRE team
#   ]
#
alert_email_addresses = [
  # "devops@example.com",
  # "oncall@example.com",
  # "sre-team@example.com"
]

#####################################
# WAF (Web Application Firewall) Configuration
#####################################
# AWS WAF protects your ALB from common web attacks
# Cost: ~$5-10/month + $1 per million requests
# See docs/WAF_SETUP.md for detailed information

# Rate limiting (requests per 5 minutes from single IP)
# Recommended: 2000 for production, increase if needed
# waf_rate_limit = 2000

# IP whitelist (optional - bypasses all WAF rules)
# Use for trusted IPs like office, monitoring services, etc.
# Example: waf_ip_whitelist = ["203.0.113.0/24", "198.51.100.42/32"]
# waf_ip_whitelist = []

# Block specific countries (optional)
# ISO 3166-1 alpha-2 country codes
# Example: waf_blocked_countries = ["CN", "RU", "KP"]
# Note: Carefully consider business impact before blocking
# waf_blocked_countries = []

# Exclude specific AWS Managed Rules (if causing false positives)
# Only add rules here if you've confirmed they're blocking legitimate traffic
# Example: waf_excluded_rules = ["SizeRestrictions_BODY"]
# waf_excluded_rules = []

# CloudWatch alarm threshold for blocked requests
# Alerts when WAF blocks more than this many requests in 5 minutes
# waf_blocked_requests_threshold = 1000

#####################################
# Production Checklist:
#####################################
# Pre-deployment:
# [ ] Update backend configuration in main.tf with your S3 bucket name
# [ ] Run ./scripts/setup-terraform-backend.sh
# [ ] Create ACM certificate for your domain and update certificate_arn
# [ ] Add production email addresses for alert_email_addresses
# [ ] Review and adjust instance types based on expected load
#
# Post-deployment (CRITICAL - Day 1):
# [ ] Confirm ALL SNS email subscriptions (check inbox + spam!)
# [ ] Test alerts with: aws cloudwatch set-alarm-state (see docs/SNS_SETUP.md)
# [ ] Verify HTTPS access and certificate
# [ ] Configure Route53 DNS records
# [ ] Test application functionality end-to-end
#
# Post-deployment (Within first week):
# [ ] Monitor CloudWatch alarms and adjust thresholds if needed
# [ ] Document on-call procedures and runbooks
# [ ] Set up Slack/PagerDuty integration for alerts (optional)
# [ ] Enable AWS Backup for automated database backups
# [ ] Review VPC Flow Logs and set appropriate retention
# [ ] Schedule regular security audits and compliance reviews
# [ ] Create disaster recovery and rollback procedures
#####################################

#####################################
# Cost Optimization Tips:
#####################################
# 1. Use Reserved Instances or Savings Plans for 30-60% discount
# 2. Consider Graviton instances (t4g, m6g) for better price/performance
# 3. Enable RDS storage autoscaling to avoid over-provisioning
# 4. Use S3 lifecycle policies for log retention
# 5. Review CloudWatch log retention settings
# 6. Monitor and right-size instances based on actual usage
#####################################
